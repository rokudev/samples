# Overview 

This sample demonstrates how to generate thumbnails and the thumbnails playlist for HLS.

> Do not use this sample as a test stream. Use the following hosted stream to test the HLS trickplay thumbnails: https://image.roku.com/ZHZscHItc2Ft/roku/trickplay/master.m3u8

## Standard-thumbnail file creation

Roku has developed resources for producing standard-thumbnail tile files and playlists for HLS. This section describes those resources and their use.

### Mac prerequisites and installation

The following utility applications are needed:

- ffmpeg: version 4.2.2
- ImageMagick 7.0.10-7 Q16 x86_64 2020-04-20, montage utility

### Linux (Centos 7) prerequisites and installation

The following utility applications are needed:

- ffmpeg: version 2.8.15
- ImageMagick 6.9.10-68 Q16 x86_64 2020-04-01, montage utility

### Mac and Linux usage

Three Roku-provided scripts each do one task to build playlists.

1. `gen_thumbs.sh`: uses ffmpeg to generate thumbnails from a stream `.mp4` or `.m3u8`, this script uses very simple ffmpeg options to generate thumbnails at fixed intervals.
2. `gen_tiles.sh`: uses thumbnails generated in `gen_thumbs.sh`, and "assembles" them into a tile using the montage command from ImageMagick, e.g. 5x4 tiles.
3. `gen_playlist.sh`: uses the tiles generated in `gen_tiles.sh` and outputs the thumbnail playlist, the output thumbnail playlist has to entered into the master playlist.

All three scripts must be run in sequence, which the `run_scripts_hls.sh` file does.

The following command generates 320x180 thumbnails and 5x4 tiles with 10 second intervals:

```
$ ./run_scripts_hls.sh master.m3u8 thumb-tile 320x180 5 4 10
```

Here is a command that generates 640x360 thumbnails and 5x4 tiles with 10 seconds intervals:

```
$ ./run_scripts_hls.sh master.m3u8 thumb-tile 640x360 5 4 10
```

Finally, the playlists generated by the two `run_scripts` commands should be entered into the master playlist, as so:

```
#EXT-X-IMAGE-STREAM-INF:BANDWIDTH=16460,RESOLUTION=320x180,CODECS="jpeg",URI="5x4_320x180/320x180-5x4.m3u8"
#EXT-X-IMAGE-STREAM-INF:BANDWIDTH=32920,RESOLUTION=640x360,CODECS="jpeg",URI="5x4_640x360/640x360-5x4.m3u8"
```

> All the materials mentioned in this article are available on GitHub, [here](https://github.com/rokudev/samples/tree/master/media/TrickPlayThumbnailsHLS).
